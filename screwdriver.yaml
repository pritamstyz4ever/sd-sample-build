shared:
    image: node:8
    settings:
        slack:
            channels:
                - 'local-builds'
            statuses:
                - SUCCESS
                - FAILURE
                - ABORTED
                - QUEUED
                - RUNNING
jobs:
    main:
        requires: [~pr, ~commit]
        steps:
            - s1: echo "Hello"
            - s2: echo "World"
    deploy:
        requires: main
        image: node:8
        environment:
            DEPLOY_ENV: dev
        steps:
            - init: echo $DEPLOY_ENV
            - wait: sleep 5m
            - deploy: echo "deploy"
    publish:
        requires: deploy
        steps:
            - echo-hello: echo hello
            - wait: sleep 4m
        freezeWindows:
            - "* 0-18 ? * 2,4"
        annotations:
            screwdriver.cd/timeout: 10
            screwdriver.cd/buildPeriodically: "H(50-55) * * * *"
    publish1:
        blockedBy: [~publish, ~deploy]
        steps:
            - echo-hello: echo hello
        requires: ~commit
        annotations:
            screwdriver.cd/timeout: 8
            screwdriver.cd/buildPeriodically: "H(15-30) * * * *"
        